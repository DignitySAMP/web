---
title: OnUnoccupiedVehicleUpdate
sidebar_label: OnUnoccupiedVehicleUpdate
description: این کالبک زمانی فراخوانده می‌شود که کلاینت بازیکن موقعیت وسیله نقلیه‌ای که رانندگی نمی‌کند را به‌روزرسانی/همگام‌سازی کند.
tags: ["vehicle"]
---

## توضیحات

این کالبک زمانی فراخوانده می‌شود که کلاینت بازیکن موقعیت وسیله نقلیه‌ای که رانندگی نمی‌کند را به‌روزرسانی/همگام‌سازی کند. این می‌تواند خارج از وسیله نقلیه یا زمانی که بازیکن مسافر وسیله نقلیه‌ای است که راننده ندارد، اتفاق بیفتد.

| نام            | توضیحات                                                                                                                                                           |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| vehicleid      | شناسه وسیله نقلیه‌ای که موقعیت آن به‌روزرسانی شده است.                                                                                                            |
| playerid       | شناسه بازیکنی که به‌روزرسانی همگام‌سازی موقعیت وسیله نقلیه را ارسال کرده است.                                                                                    |
| passenger_seat | شناسه صندلی اگر بازیکن مسافر باشد. 0=در وسیله نقلیه نیست، 1=مسافر جلو، 2=عقب چپ 3=عقب راست 4+ برای کوچ/اتوبوس و غیره با صندلی‌های مسافر زیاد است.         |
| Float:new_x    | مختصات جدید X وسیله نقلیه.                                                                                                                                        |
| Float:new_y    | مختصات جدید Y وسیله نقلیه.                                                                                                                                        |
| Float:new_z    | مختصات جدید Z وسیله نقلیه.                                                                                                                                        |
| Float:vel_x    | سرعت جدید X وسیله نقلیه.                                                                                                                                          |
| Float:vel_y    | سرعت جدید Y وسیله نقلیه.                                                                                                                                          |
| Float:vel_z    | سرعت جدید Z وسیله نقلیه.                                                                                                                                          |

## مقادیر برگشتی

همیشه اول در filterscript ها فراخوانده می‌شود بنابراین برگرداندن 0 در آنجا سایر اسکریپت‌ها را نیز از پردازش آن مسدود می‌کند.

## مثال‌ها

```c
public OnUnoccupiedVehicleUpdate(vehicleid, playerid, passenger_seat, Float:new_x, Float:new_y, Float:new_z, Float:vel_x, Float:vel_y, Float:vel_z)
{
    // Check if it moved far
    if (GetVehicleDistanceFromPoint(vehicleid, new_x, new_y, new_z) > 50.0)
    {
        // Reject the update
        return 0;
    }

    return 1;
}
```

## نکته‌ها

:::warning

- این کالبک خیلی مکرر در هر ثانیه برای هر وسیله نقلیه غیراشغال فراخوانده می‌شود. باید از پیاده‌سازی محاسبات فشرده یا عملیات فشرده نوشتن/خواندن فایل در این کالبک خودداری کنید.
- [GetVehiclePos](../functions/GetVehiclePos) مختصات قدیمی وسیله نقلیه را قبل از این به‌روزرسانی برخواهد گرداند.

:::

## کالبک‌های مرتبط

کالبک‌های زیر ممکن است مفید باشند، زیرا به نوعی با این کالبک مرتبط هستند.

- [OnTrailerUpdate](OnTrailerUpdate): زمانی فراخوانده می‌شود که موقعیت trailer توسط کلاینت همگام‌سازی شود.