---
title: "راه اندازی سرور بر روی لینوکس"
sidebar_label: "اجرای سرور روی لینوکس"
description: "راه اندازی سرور بر روی لینوکس"
---

**این راهنما شامل راهنمای جامعی برای نصب سرور open.mp در اوبونتو یا لینوکس مبتنی بر Debian دیگر است.
چه مبتدی باشید یا فقط به دنبال تازه کردن دانش خود باشید، این راهنما ممکن است چیز مفیدی برای شما داشته باشد!**

:::warning

اگر از سرور SA:MP استفاده می‌کنید و هنوز به open.mp تبدیل نشده‌اید، **[لطفاً اینجا متوقف شوید و ابتدا این راهنما را بخوانید.](https://www.open.mp/docs/server/Installation)**

:::

:::note

اگر از پلاگین FCNPC استفاده می‌کنید، لطفاً فعلاً متوقف شوید زیرا این پلاگین در حال حاضر برای open.mp کار نمی‌کند.

:::

## پیش‌نیازها

قبل از شروع، باید داشته باشید:

- دستگاهی که Ubuntu (20.04 یا جدیدتر توصیه می‌شود) یا لینوکس مبتنی بر Debian دیگر اجرا می‌کند؛
- WinSCP یا Filezilla برای انتقال فایل‌ها؛
- PuTTY یا راه‌حل SSH میزبانی شما؛

:::note

اگر WinSCP را نصب کنید، installer از شما خواهد پرسید که آیا PuTTY را نصب کنید!
این به خودتان بستگی دارد که آیا می‌خواهید آن را نصب کنید یا نه، اما همیشه می‌توانید بعداً آن را دانلود کنید!

:::

## فاز 1: آماده‌سازی محیط

1. اتصال از طریق SSH:
   - از PuTTY یا راه‌حل SSH میزبانی خود برای اتصال به instance استفاده کنید.

:::note

اگر مطمئن نیستید چگونه به Linux Instance خود متصل شوید، راهنماهای آنلاین یا مستندات ارائه‌دهنده میزبانی خود را جستجو کنید.

:::

2. بروزرسانی Linux Instance شما:

   - قبل از ادامه، بیایید اطمینان حاصل کنیم که سیستم شما به‌روز است با اجرای:

   ```
   sudo apt update
   ```

   ```
   sudo apt upgrade
   ```

3. ایجاد حساب سرویس امن:

   - به دلایل امنیتی، باید حساب سرویس اختصاصی بدون دایرکتوری خانه ایجاد کنیم:

   ```
   sudo useradd -M svc-omp-server
   ```

4. قفل کردن حساب سرویس:

   - بیایید از استفاده حساب سرویس برای ورود جلوگیری کنیم:

   ```
   sudo usermod -L svc-omp-server
   ```

5. ایجاد دایرکتوری برای فایل‌های سرور:

   - ما از دایرکتوری /opt استفاده خواهیم کرد، این مکان استاندارد برای برنامه‌های شخص ثالث است:

   ```
   sudo mkdir /opt/omp-server
   ```

6. تنظیم مجوزها برای دایرکتوری:

   - تغییر گروه دایرکتوری برای تطبیق با حساب سرویس:

   ```
   sudo chgrp svc-omp-server /opt/omp-server
   ```

   - تنظیم فلگ g+s تا فایل‌های جدید گروه صحیح را به ارث ببرند و حذف دسترسی برای دیگران:

   ```
   sudo chmod g+s /opt/omp-server
   ```

   ```
   sudo chmod o-rwx /opt/omp-server
   ```

<hr />

## فاز 2: نصب فایل‌های سرور open.mp

7. بیایید به دایرکتوری سرور برویم:

   - باید به دایرکتوری /opt/omp-server که سرور در آن ذخیره خواهد شد برویم:

   ```
   cd /opt/omp-server
   ```

8. دانلود فایل‌های سرور open.mp:

   - آخرین نسخه سرور open.mp را دانلود کنید:

   ```
   sudo -u svc-omp-server wget https://github.com/openmultiplayer/open.mp/releases/download/vX.X.X.XXXX/open.mp-linux-x86.tar.gz
   ```

:::warning

**همیشه باید آخرین نسخه را در صفحه GitHub Releases open.mp بررسی کنید!**
[https://github.com/openmultiplayer/open.mp/releases](https://github.com/openmultiplayer/open.mp/releases)

:::

9. استخراج فایل‌های سرور:

   - پس از دانلود، فایل‌ها را استخراج کنید:

   ```
   sudo -u svc-omp-server tar -xzf open.mp-linux-x86.tar.gz
   ```

<hr />

## فاز 3: پیکربندی و شروع سرور

10. نصب کتابخانه‌های x86 مورد نیاز:

    - از آنجا که سرور به عنوان برنامه 32-bit اجرا می‌شود، باید پشتیبانی معماری 32-bit را فعال کنید:

    ```
    sudo dpkg --add-architecture i386
    ```

    ```
    sudo apt update
    ```

    ```
    sudo apt install libc6:i386
    ```

11. قابل اجرا کردن سرور:

    - مجوزها را تغییر دهید تا سرور قابل اجرا باشد (فقط یک بار لازم!):

    ```
    cd /opt/omp-server/Server/
    ```

    ```
    sudo chmod +x omp-server
    ```

12. شروع سرور:

    - از دستور زیر برای شروع سرور در پس‌زمینه استفاده کنید:

    ```
    nohup ./omp-server &
    ```

    - ترمینال شناسه فرآیند (PID) خروجی خواهد داد. این شماره را برای مراجعه آتی یادداشت کنید.

<hr />

## فاز 4: مدیریت سرور

13. متوقف کردن سرور:

    - برای متوقف کردن سرور، از PID از گام 12 استفاده کنید و اجرا کنید:

    ```
    sudo kill <PID>
    ```

14. پیدا کردن شناسه فرآیند (اگر فراموش شد):

    - اگر شناسه فرآیند را فراموش کردید، اجرا کنید:

    ```
    top
    ```

    - به دنبال فرآیند omp-server در لیست بگردید، PID را یادداشت کنید، 'Q' فشار دهید تا خروج کنید، و سپس فرآیند را همانطور که در گام 13 نشان داده شد kill کنید.

<hr />

## فاز 5: آپلود گیم مود و فایل‌های شما

15. گیم مودها و اسکریپت‌های سفارشی خود را آپلود کنید:
    - از WinSCP یا Filezilla برای انتقال گیم مودها و اسکریپت‌های خود به دایرکتوری /opt/omp-server استفاده کنید.
      مهم: مطمئن شوید که از فایل‌های .so برای پلاگین‌های لینوکس استفاده می‌کنید، زیرا فایل‌های .dll فقط در ویندوز پشتیبانی می‌شوند.

## کمک

اگر همچنان مشکلی در راه‌اندازی سرور دارید، به سرور رسمی Discord open.mp بپیوندید: [https://discord.gg/samp](https://discord.gg/samp)

سوال خود را در کانال [#openmp-support](https://discord.com/channels/231799104731217931/966398440051445790) پست کنید و این راهنما را ذکر کنید تا بتوانیم آن را بهبود دهیم.